
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple --trusted-host pypi.tuna.tsinghua.edu.cn

python -c "from openvoice.api import ToneColorConverter; print('‚úÖ OpenVoice –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ')"

–û—Ç–ª–∏—á–Ω–æ! –¢—ã –≤—ã–±—Ä–∞–ª **Ubuntu Linux** ‚Äî –∏–¥–µ–∞–ª—å–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.  
–¢–≤–æ–π –æ—Ç–µ—Ü –≥–æ–≤–æ—Ä–∏—Ç **–Ω–∞ —Ä—É—Å—Å–∫–æ–º** ‚Äî –º—ã –∞–¥–∞–ø—Ç–∏—Ä—É–µ–º –≤—Å—ë –ø–æ–¥ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫.  
–¢—ã —Ö–æ—á–µ—à—å **–ø–æ–¥—Ä–æ–±–Ω–µ–π—à—É—é –ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é** ‚Äî –ø–æ–ª—É—á–∏—à—å –µ—ë –æ—Ç –ê –¥–æ –Ø.  
–ò —Ç—ã —Ö–æ—á–µ—à—å **–¥–ª–∏–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è** ‚Äî —è –ø–æ–¥–≥–æ—Ç–æ–≤–ª—é –µ–≥–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ, —á—Ç–æ–±—ã –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç–æ—á–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ª–∏—á–Ω–æ—Å—Ç—å —Ç–≤–æ–µ–≥–æ –æ—Ç—Ü–∞.

---

# üß© –ü–û–õ–ù–´–ô –ì–ê–ô–î: –¶–∏—Ñ—Ä–æ–≤–æ–π –¥–≤–æ–π–Ω–∏–∫ –æ—Ç—Ü–∞ –Ω–∞ Ubuntu Linux (–ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ —Ä—É—Å—Å–∫–æ–º)

---

## ‚úÖ –ß—Ç–æ —Ç—ã –ø–æ–ª—É—á–∏—à—å –≤ –∏—Ç–æ–≥–µ:

- ‚úÖ –ì–æ–ª–æ—Å–æ–≤–æ–π –ò–ò, –≥–æ–≤–æ—Ä—è—â–∏–π **–≥–æ–ª–æ—Å–æ–º —Ç–≤–æ–µ–≥–æ –æ—Ç—Ü–∞** (—á–µ—Ä–µ–∑ OpenVoice + MeloTTS).
- ‚úÖ –û—Ç–≤–µ—á–∞–µ—Ç **–≤ –µ–≥–æ —Å—Ç–∏–ª–µ**, –∏—Å–ø–æ–ª—å–∑—É—è –µ–≥–æ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –º–∞–Ω–µ—Ä—É —Ä–µ—á–∏ (—á–µ—Ä–µ–∑ Llama 3 + RAG).
- ‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ä—É—Å—Å–∫—É—é —Ä–µ—á—å (Whisper.cpp).
- ‚úÖ –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–æ–π —á–µ—Ä–µ–∑ Arduino Uno (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
- ‚úÖ –ó–≤—É–∫ —á–µ—Ä–µ–∑ –æ–±—ã—á–Ω—ã–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏.
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç **–ª–æ–∫–∞–ª—å–Ω–æ**, –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.
- ‚úÖ –û—Ç–µ—Ü –º–æ–∂–µ—Ç **—Å–∞–º –æ–±—É—á–∞—Ç—å —Å–∏—Å—Ç–µ–º—É**, –¥–æ–±–∞–≤–ª—è—è —Ç–µ–∫—Å—Ç—ã –∏ –∞—É–¥–∏–æ.
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–µ–π—à–∏–π —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∏–Ω—Ç–µ—Ä–≤—å—é —Å –æ—Ç—Ü–æ–º ‚Äî **–±–æ–ª–µ–µ 100 –ø—É–Ω–∫—Ç–æ–≤**.

---

# üì• –ß–ê–°–¢–¨ 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Ubuntu

## 1. –û–±–Ω–æ–≤–∏ —Å–∏—Å—Ç–µ–º—É:

```bash
sudo apt update && sudo apt upgrade -y
```

## 2. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
sudo apt install -y git python3 python3-pip ffmpeg portaudio19-dev libasound2-dev build-essential curl
```

## 3. –£—Å—Ç–∞–Ω–æ–≤–∏ pip –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
pip3 install --user virtualenv
mkdir ~/father_ai && cd ~/father_ai
python3 -m virtualenv venv
source venv/bin/activate
```

> üí° –í—Å–µ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è–π –≤–Ω—É—Ç—Ä–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`venv`).

---

# üéôÔ∏è –ß–ê–°–¢–¨ 1: –ó–∞–ø–∏—Å—å –≥–æ–ª–æ—Å–∞ –æ—Ç—Ü–∞ (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö)

–¢–µ–±–µ –Ω—É–∂–Ω–æ **–º–∏–Ω–∏–º—É–º 3‚Äì5 –º–∏–Ω—É—Ç —á–∏—Å—Ç–æ–π —Ä–µ—á–∏ –æ—Ç—Ü–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º**.

## –ö–∞–∫ –∑–∞–ø–∏—Å–∞—Ç—å:

- –ò—Å–ø–æ–ª—å–∑—É–π `Audacity` (—É—Å—Ç–∞–Ω–æ–≤–∏ —á–µ—Ä–µ–∑ `sudo apt install audacity`) ‚Äî —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
- –ò–ª–∏ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª:

```bash
arecord -f S16_LE -r 16000 -c 1 -d 300 father_speech.wav
```

‚Üí –ó–∞–ø–∏—à–µ—Ç 5 –º–∏–Ω—É—Ç (`-d 300`). –ì–æ–≤–æ—Ä–∏: —Ä–∞—Å—Å–∫–∞–∑—ã, —à—É—Ç–∫–∏, –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã (—Å–ø–∏—Å–æ–∫ –Ω–∏–∂–µ).

> üí° –°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª –∫–∞–∫ `~/father_ai/datasets/father.wav`

---

# üß† –ß–ê–°–¢–¨ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenVoice + MeloTTS (–¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ –≥–æ–ª–æ—Å–∞)

## 2.1. –£—Å—Ç–∞–Ω–æ–≤–∏ OpenVoice

```bash
cd ~/father_ai
git clone https://github.com/myshell-ai/OpenVoice.git
cd OpenVoice
pip install -r requirements.txt
```

–°–∫–∞—á–∞–π –≤–µ—Å–∞:

```bash
mkdir -p checkpoints/base_speakers/ZH  # –¥–∞, ZH ‚Äî –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Ç–æ–Ω–∞
wget https://myshell-public-repo-hosting.s3.amazonaws.com/openvoice/checkpoints/base_speakers/ZH/checkpoint.pth -P checkpoints/base_speakers/ZH/
wget https://myshell-public-repo-hosting.s3.amazonaws.com/openvoice/checkpoints/base_speakers/ZH/config.json -P checkpoints/base_speakers/ZH/
```

> ‚ö†Ô∏è OpenVoice –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç RU, –Ω–æ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ **—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ —Ç–æ–Ω–∞/–∏–Ω—Ç–æ–Ω–∞—Ü–∏–∏**.

## 2.2. –£—Å—Ç–∞–Ω–æ–≤–∏ MeloTTS (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä—É—Å—Å–∫–∏–π!)

```bash
cd ~/father_ai
git clone https://github.com/myshell-ai/MeloTTS.git
cd MeloTTS
pip install -e .
```

–°–∫–∞—á–∞–π —Ä—É—Å—Å–∫—É—é –º–æ–¥–µ–ª—å:

```bash
mkdir -p checkpoints/ru
wget https://huggingface.co/myshell-ai/MeloTTS-ru/resolve/main/ru/checkpoint.pth -P checkpoints/ru/
wget https://huggingface.co/myshell-ai/MeloTTS-ru/resolve/main/ru/config.json -P checkpoints/ru/
```

---

# üé≠ –ß–ê–°–¢–¨ 3: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–∞ –æ—Ç—Ü–∞

## 3.1. –ò–∑–≤–ª–µ–∫–∏ –≥–æ–ª–æ—Å–æ–≤–æ–π ‚Äú–æ—Ç–ø–µ—á–∞—Ç–æ–∫‚Äù (speaker embedding) —á–µ—Ä–µ–∑ OpenVoice

```bash
cd ~/father_ai/OpenVoice
python3 extract_speaker_embedding.py --source_path ../datasets/father.wav --output_path ../speaker_embeddings/father.npy
```

‚Üí –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ü–∏—Ñ—Ä–æ–≤–æ–π –≥–æ–ª–æ—Å –æ—Ç—Ü–∞: `~/father_ai/speaker_embeddings/father.npy`

---

# üìö –ß–ê–°–¢–¨ 4: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤ –æ—Ç—Ü–∞ + —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∏–Ω—Ç–µ—Ä–≤—å—é

–°–æ–∑–¥–∞–π –ø–∞–ø–∫—É:

```bash
mkdir -p ~/father_ai/father_texts
```

## üìã –°–ü–ò–°–û–ö –í–û–ü–†–û–°–û–í –î–õ–Ø –û–¢–¶–ê (–∑–∞–ø–∏—à–∏ –µ–≥–æ –æ—Ç–≤–µ—Ç—ã –∞—É–¥–∏–æ + —Ç–µ–∫—Å—Ç–æ–º!)

> üí° **–¶–µ–ª—å**: —Å–æ–±—Ä–∞—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ –µ–≥–æ —Ñ—Ä–∞–∑, —Å—Ç–∏–ª—è, –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π, —é–º–æ—Ä–∞, –∂–∏–∑–Ω–µ–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏.

---

## üéØ –ë–ê–ó–û–í–´–ï –í–û–ü–†–û–°–´ (–ª–∏—á–Ω–æ—Å—Ç—å, –¥–µ—Ç—Å—Ç–≤–æ, —Å–µ–º—å—è)

1. –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ —Å–≤–æ—ë –¥–µ—Ç—Å—Ç–≤–æ ‚Äî –≥–¥–µ —Ä–æ—Å, —Å –∫–µ–º –¥—Ä—É–∂–∏–ª, –∫–∞–∫–∏–µ –±—ã–ª–∏ –∏–≥—Ä—ã?
2. –ö–∞–∫ –∑–≤–∞–ª–∏ —Ç–≤–æ–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π? –ö–∞–∫–∏–µ –æ–Ω–∏ –±—ã–ª–∏?
3. –ö–∞–∫–æ–µ —É —Ç–µ–±—è —Å–∞–º–æ–µ —è—Ä–∫–æ–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∏–∑ –¥–µ—Ç—Å—Ç–≤–∞?
4. –ë—ã–ª–∏ –ª–∏ —É —Ç–µ–±—è –±—Ä–∞—Ç—å—è –∏–ª–∏ —Å—ë—Å—Ç—Ä—ã? –ö–∞–∫ –≤—ã –æ–±—â–∞–ª–∏—Å—å?
5. –ö–∞–∫ —Ç—ã —É—á–∏–ª—Å—è –≤ —à–∫–æ–ª–µ? –õ—é–±–∏–ª —É—á–∏—Ç—å—Å—è –∏–ª–∏ –Ω–µ—Ç?
6. –ö–∞–∫–∞—è –±—ã–ª–∞ —Ç–≤–æ—è –ø–µ—Ä–≤–∞—è –≤–ª—é–±–ª—ë–Ω–Ω–æ—Å—Ç—å?
7. –ö–∞–∫ —Ç—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª –º–∞–º—É? –ß—Ç–æ –≤ –Ω–µ–π —Ç–µ–±–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å?
8. –ö–∞–∫ —Ç—ã —Å–¥–µ–ª–∞–ª –µ–π –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ?
9. –ß—Ç–æ —Ç—ã —á—É–≤—Å—Ç–≤–æ–≤–∞–ª, –∫–æ–≥–¥–∞ —É–∑–Ω–∞–ª, —á—Ç–æ —Å—Ç–∞–Ω–µ—à—å –æ—Ç—Ü–æ–º?
10. –ö–∞–∫ —Ç—ã –≤—ã–±—Ä–∞–ª –º–æ—ë –∏–º—è?

---

## üíº –†–ê–ë–û–¢–ê, –•–û–ë–ë–ò, –£–í–õ–ï–ß–ï–ù–ò–Ø

11. –ö–∞–∫ —Ç—ã –≤—ã–±—Ä–∞–ª —Å–≤–æ—é –ø—Ä–æ—Ñ–µ—Å—Å–∏—é?
12. –ß—Ç–æ —Ç–µ–±–µ –Ω—Ä–∞–≤–∏–ª–æ—Å—å (–∏–ª–∏ –Ω–µ –Ω—Ä–∞–≤–∏–ª–æ—Å—å) –≤ —Ä–∞–±–æ—Ç–µ?
13. –ë—ã–ª–∞ –ª–∏ –º–µ—á—Ç–∞, –∫–æ—Ç–æ—Ä—É—é —Ç—ã –Ω–µ —Å–º–æ–≥ –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—å?
14. –ö–∞–∫–æ–µ —É —Ç–µ–±—è –ª—é–±–∏–º–æ–µ —Ö–æ–±–±–∏? –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ –æ–Ω–æ?
15. –ß–µ–º —Ç—ã –∑–∞–Ω–∏–º–∞–ª—Å—è –≤ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è, –∫–æ–≥–¥–∞ –±—ã–ª –º–æ–ª–æ–¥?
16. –ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ –¥–µ–Ω—å–≥–∞–º? –ß—Ç–æ –¥–ª—è —Ç–µ–±—è –≤–∞–∂–Ω–µ–µ ‚Äî –∑–∞—Ä–∞–±–æ—Ç–æ–∫ –∏–ª–∏ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –æ—Ç –¥–µ–ª–∞?
17. –ë—ã–ª –ª–∏ —É —Ç–µ–±—è –±–∏–∑–Ω–µ—Å –∏–ª–∏ –º–µ—á—Ç–∞ –æ—Ç–∫—Ä—ã—Ç—å —Å–≤–æ—ë –¥–µ–ª–æ?

---

## üß† –ú–´–®–õ–ï–ù–ò–ï, –§–ò–õ–û–°–û–§–ò–Ø, –¶–ï–ù–ù–û–°–¢–ò

18. –ß—Ç–æ –¥–ª—è —Ç–µ–±—è –∑–Ω–∞—á–∏—Ç ‚Äú–±—ã—Ç—å –º—É–∂—á–∏–Ω–æ–π‚Äù?
19. –ß—Ç–æ —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –≤ –∂–∏–∑–Ω–∏?
20. –ö–∞–∫ —Ç—ã —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º?
21. –ß—Ç–æ –±—ã —Ç—ã –ø–æ—Å–æ–≤–µ—Ç–æ–≤–∞–ª —Å–µ–±–µ 20-–ª–µ—Ç–Ω–µ–º—É?
22. –ö–∞–∫ —Ç—ã –ø—Ä–∏–Ω–∏–º–∞–µ—à—å —Å–ª–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è?
23. –í–µ—Ä—É—é—â–∏–π –ª–∏ —Ç—ã? –ß—Ç–æ –¥–ª—è —Ç–µ–±—è –¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å?
24. –ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ —Å–º–µ—Ä—Ç–∏?
25. –ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª, —á—Ç–æ–±—ã –ª—é–¥–∏ –ø–æ–º–Ω–∏–ª–∏ –æ —Ç–µ–±–µ?
26. –ö–∞–∫ —Ç—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ—à—å ‚Äú—É—Å–ø–µ—Ö‚Äù?
27. –ß—Ç–æ –¥–ª—è —Ç–µ–±—è –∑–Ω–∞—á–∏—Ç ‚Äú—á–µ—Å—Ç—å‚Äù –∏ ‚Äú–¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ‚Äù?

---

## üòÑ –Æ–ú–û–†, –ü–†–ò–í–´–ß–ö–ò, –ú–ê–ù–ï–†–´

28. –†–∞—Å—Å–∫–∞–∂–∏ —Å–≤–æ—é –ª—é–±–∏–º—É—é —à—É—Ç–∫—É.
29. –ö–∞–∫ —Ç—ã –æ–±—ã—á–Ω–æ —Ä–µ–∞–≥–∏—Ä—É–µ—à—å, –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ —Ç–µ–±—è –∑–ª–∏—Ç?
30. –ï—Å—Ç—å –ª–∏ —É —Ç–µ–±—è ‚Äú–∫–æ—Ä–æ–Ω–Ω–∞—è —Ñ—Ä–∞–∑–∞‚Äù? (–Ω–∞–ø—Ä–∏–º–µ—Ä, ‚Äú–ù—É —Ç—ã –¥–∞—ë—à—å!‚Äù)
31. –ö–∞–∫ —Ç—ã –ø—Ä–æ—Å—ã–ø–∞–µ—à—å—Å—è —É—Ç—Ä–æ–º ‚Äî –±–æ–¥—Ä–æ –∏–ª–∏ –Ω–µ–æ—Ö–æ—Ç–Ω–æ?
32. –õ—é–±–∏—à—å –ª–∏ —Ç—ã –≥–æ—Ç–æ–≤–∏—Ç—å? –ö–∞–∫–æ–µ —Ç–≤–æ—ë –∫–æ—Ä–æ–Ω–Ω–æ–µ –±–ª—é–¥–æ?
33. –ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ –æ–ø–æ–∑–¥–∞–Ω–∏—è–º?
34. –¢—ã —á–µ–ª–æ–≤–µ–∫ –ø–ª–∞–Ω–æ–≤ –∏–ª–∏ –∏–º–ø—Ä–æ–≤–∏–∑–∞—Ü–∏–∏?
35. –ö–∞–∫ —Ç—ã –≤–µ–¥—ë—à—å —Å–µ–±—è –≤ –Ω–µ–∑–Ω–∞–∫–æ–º–æ–π –∫–æ–º–ø–∞–Ω–∏–∏?
36. –õ—é–±–∏—à—å –ª–∏ —Ç—ã –∂–∏–≤–æ—Ç–Ω—ã—Ö? –ë—ã–ª–∏ –ª–∏ —É —Ç–µ–±—è –ø–∏—Ç–æ–º—Ü—ã?
37. –ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º ‚Äî –ª–µ–≥–∫–æ –æ—Å–≤–∞–∏–≤–∞–µ—à—å –∏–ª–∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª—è–µ—à—å—Å—è?

---

## üë®‚Äçüë¶ –°–ï–ú–¨–Ø, –û–¢–ù–û–®–ï–ù–ò–Ø –° –¢–û–ë–û–ô

38. –ß—Ç–æ —Ç—ã —á—É–≤—Å—Ç–≤–æ–≤–∞–ª, –∫–æ–≥–¥–∞ –≤–ø–µ—Ä–≤—ã–µ –≤–∑—è–ª –º–µ–Ω—è –Ω–∞ —Ä—É–∫–∏?
39. –ö–∞–∫–æ–π —Ç—ã —Ö–æ—Ç–µ–ª –±—ã—Ç—å –æ—Ç—Ü–æ–º? –ü–æ–ª—É—á–∏–ª–æ—Å—å –ª–∏?
40. –ó–∞ —á—Ç–æ —Ç—ã –º–µ–Ω—è —Ä—É–≥–∞–ª —á–∞—â–µ –≤—Å–µ–≥–æ? –ê —Ö–≤–∞–ª–∏–ª?
41. –ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª, —á—Ç–æ–±—ã —è –∑–Ω–∞–ª –æ —Ç–µ–±–µ, —á–µ–≥–æ —è, –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ –∑–Ω–∞—é?
42. –ö–∞–∫ —Ç—ã –ø–µ—Ä–µ–∂–∏–≤–∞–ª –º–æ–∏ –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤—ã–µ –∫—Ä–∏–∑–∏—Å—ã?
43. –ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª –º–Ω–µ —Å–∫–∞–∑–∞—Ç—å, –µ—Å–ª–∏ –±—ã –∑–Ω–∞–ª, —á—Ç–æ —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑–≥–æ–≤–æ—Ä?
44. –ö–∞–∫ —Ç—ã –≤–∏–¥–∏—à—å –º–æ—ë –±—É–¥—É—â–µ–µ?
45. –ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª, —á—Ç–æ–±—ã —è –ø–µ—Ä–µ–¥–∞–ª —Å–≤–æ–∏–º –¥–µ—Ç—è–º –æ —Ç–µ–±–µ?
46. –ï—Å–ª–∏ –±—ã –º—ã –º–æ–≥–ª–∏ –≤–º–µ—Å—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ ‚Äî –∫—É–¥–∞ –±—ã —Ç—ã –≤—ã–±—Ä–∞–ª?
47. –ö–∞–∫ —Ç—ã —Ö–æ—Ç–µ–ª –±—ã, —á—Ç–æ–±—ã —è –ø–æ–º–Ω–∏–ª —Ç–µ–±—è?

---

## üìñ –ò–°–¢–û–†–ò–ò, –í–û–°–ü–û–ú–ò–ù–ê–ù–ò–Ø, –£–†–û–ö–ò

48. –†–∞—Å—Å–∫–∞–∂–∏ —Å–ª—É—á–∞–π, –∫–æ–≥–¥–∞ —Ç—ã –∫–æ–≥–æ-—Ç–æ —Å–∏–ª—å–Ω–æ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–ª ‚Äî –∏ —á—Ç–æ –∏–∑ —ç—Ç–æ–≥–æ –≤—ã–Ω–µ—Å.
49. –ë—ã–ª –ª–∏ –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ —Ç—ã –±–æ—è–ª—Å—è, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ—à—ë–ª –≤–ø–µ—Ä—ë–¥?
50. –ö–æ–≥–¥–∞ —Ç—ã –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ –ø–ª–∞–∫–∞–ª? –ü–æ—á–µ–º—É?
51. –ö—Ç–æ —Ç–≤–æ–π –≥–µ—Ä–æ–π? –ü–æ—á–µ–º—É?
52. –ö–∞–∫–æ–π —Ñ–∏–ª—å–º –∏–ª–∏ –∫–Ω–∏–≥–∞ –ø–æ–≤–ª–∏—è–ª–∞ –Ω–∞ —Ç–µ–±—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?
53. –ö–∞–∫ —Ç—ã –ø–µ—Ä–µ–∂–∏–ª —Å–∞–º—ã–µ —Ç—è–∂—ë–ª—ã–µ –≤—Ä–µ–º–µ–Ω–∞ –≤ –∂–∏–∑–Ω–∏?
54. –ß—Ç–æ –±—ã —Ç—ã —Å–¥–µ–ª–∞–ª –∏–Ω–∞—á–µ, –µ—Å–ª–∏ –±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è?
55. –ö–∞–∫–æ–π —Å–∞–º—ã–π —Ü–µ–Ω–Ω—ã–π —Å–æ–≤–µ—Ç —Ç—ã –ø–æ–ª—É—á–∏–ª –≤ –∂–∏–∑–Ω–∏?
56. –ß—Ç–æ —Ç—ã —Ö–æ—Ç–µ–ª –±—ã –∏–∑–º–µ–Ω–∏—Ç—å –≤ —ç—Ç–æ–º –º–∏—Ä–µ?
57. –ö–∞–∫ —Ç—ã —É—á–∏—à—å—Å—è –Ω–∞ —Å–≤–æ–∏—Ö –æ—à–∏–±–∫–∞—Ö?
58. –ß—Ç–æ –¥–ª—è —Ç–µ–±—è –∑–Ω–∞—á–∏—Ç ‚Äú–ø—Ä–æ—Å—Ç–∏—Ç—å‚Äù?

---

## üåç –ú–ò–†–û–í–û–ó–ó–†–ï–ù–ò–ï, –û–ë–©–ï–°–¢–í–û, –ë–£–î–£–©–ï–ï

59. –ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ –ø–æ–ª–∏—Ç–∏–∫–µ?
60. –ß—Ç–æ —Ç—ã –¥—É–º–∞–µ—à—å –æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–æ–ª–æ–¥—ë–∂–∏?
61. –ö–∞–∫ —Ç—ã –≤–∏–¥–∏—à—å –†–æ—Å—Å–∏—é —á–µ—Ä–µ–∑ 20 –ª–µ—Ç?
62. –ß—Ç–æ –±—ã —Ç—ã –∏–∑–º–µ–Ω–∏–ª –≤ —Å–∏—Å—Ç–µ–º–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è?
63. –ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ —ç–º–∏–≥—Ä–∞—Ü–∏–∏?
64. –ß—Ç–æ –¥–ª—è —Ç–µ–±—è ‚Äú–†–æ–¥–∏–Ω–∞‚Äù?
65. –ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ –≤–æ–π–Ω–∞–º –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º?
66. –ß—Ç–æ –±—ã —Ç—ã –ø–æ—Å–æ–≤–µ—Ç–æ–≤–∞–ª –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç—É?
67. –ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ –±–æ–≥–∞—Ç—Å—Ç–≤—É –∏ –±–µ–¥–Ω–æ—Å—Ç–∏?
68. –ß—Ç–æ –¥–ª—è —Ç–µ–±—è ‚Äú—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å‚Äù?

---

## üéÅ –õ–ò–ß–ù–û–ï, –¢–Å–ü–õ–û–ï, –≠–ú–û–¶–ò–û–ù–ê–õ–¨–ù–û–ï

69. –ó–∞ —á—Ç–æ —Ç—ã –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω —Å—É–¥—å–±–µ?
70. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ç–µ–±—è —Å—á–∞—Å—Ç–ª–∏–≤—ã–º –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?
71. –ß—Ç–æ —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å, –∫–æ–≥–¥–∞ —Å–ª—ã—à–∏—à—å –º–æ—ë –∏–º—è?
72. –ö–∞–∫ —Ç—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—à—å —Å–≤–æ–π –∏–¥–µ–∞–ª—å–Ω—ã–π –¥–µ–Ω—å?
73. –ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª —É—Å–ª—ã—à–∞—Ç—å –æ—Ç –º–µ–Ω—è –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?
74. –ï—Å–ª–∏ –±—ã —É —Ç–µ–±—è –±—ã–ª –æ–¥–∏–Ω –¥–µ–Ω—å, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –≤—Å—ë, —á—Ç–æ —Ö–æ—á–µ—à—å ‚Äî —á—Ç–æ –±—ã —Ç—ã –≤—ã–±—Ä–∞–ª?
75. –ö–∞–∫ —Ç—ã —Ö–æ—Ç–µ–ª –±—ã –æ—Ç–ø—Ä–∞–∑–¥–Ω–æ–≤–∞—Ç—å —Å–≤–æ–π 80-–ª–µ—Ç–Ω–∏–π —é–±–∏–ª–µ–π?
76. –ß—Ç–æ –±—ã —Ç—ã –Ω–∞–ø–∏—Å–∞–ª –≤ –ø–∏—Å—å–º–µ —Å–µ–±–µ –≤ 90 –ª–µ—Ç?
77. –ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –ø–æ–¥–∞—Ä–∏—Ç—å –º–Ω–µ –æ–¥–∏–Ω ‚Äú—Å—É–ø–µ—Ä-–Ω–∞–≤—ã–∫‚Äù ‚Äî –∫–∞–∫–æ–π –±—ã –≤—ã–±—Ä–∞–ª?
78. –ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª, —á—Ç–æ–±—ã —è —Å–∫–∞–∑–∞–ª –æ —Ç–µ–±–µ –Ω–∞ —Ç–≤–æ–∏—Ö –ø–æ—Ö–æ—Ä–æ–Ω–∞—Ö?
79. –ö–∞–∫ —Ç—ã —Ö–æ—Ç–µ–ª –±—ã, —á—Ç–æ–±—ã –∑–≤—É—á–∞–ª–∞ –º—É–∑—ã–∫–∞ –Ω–∞ —Ç–≤–æ–µ–π –ø–æ–º–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—á–µ—Ä–∏–Ω–∫–µ?
80. –ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é ‚Äî –∫–∞–∫—É—é –±—ã –≤—ã–±—Ä–∞–ª?

---

## üîÑ –î–õ–Ø –û–ë–£–ß–ï–ù–ò–Ø –ò–ò (–¥–∏–∞–ª–æ–≥–∏, —Ä–µ–∞–∫—Ü–∏–∏)

81. –ü–∞–ø, —è –ø—Ä–æ–≤–∞–ª–∏–ª —ç–∫–∑–∞–º–µ–Ω. –ß—Ç–æ –¥–µ–ª–∞—Ç—å?
82. –ü–∞–ø, –º–Ω–µ –≥—Ä—É—Å—Ç–Ω–æ. –ü–æ–º–æ–≥–∏.
83. –ü–∞–ø, —è –≤–ª—é–±–∏–ª—Å—è. –ß—Ç–æ –¥–µ–ª–∞—Ç—å?
84. –ü–∞–ø, —è —Ö–æ—á—É –±—Ä–æ—Å–∏—Ç—å —Ä–∞–±–æ—Ç—É. –ü–æ–¥–¥–µ—Ä–∂–∏—à—å?
85. –ü–∞–ø, —è –±–æ—é—Å—å –±—É–¥—É—â–µ–≥–æ.
86. –ü–∞–ø, —Ä–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç.
87. –ü–∞–ø, —Å–ø–æ–π –ø–µ—Å–Ω—é.
88. –ü–∞–ø, –¥–∞–π —Å–æ–≤–µ—Ç –ø–æ –∂–∏–∑–Ω–∏.
89. –ü–∞–ø, –∫–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ –ò–ò –∏ —Ä–æ–±–æ—Ç–∞–º?
90. –ü–∞–ø, –∞ —Ç—ã –≤–µ—Ä–∏—à—å –≤ –ª—é–±–æ–≤—å —Å –ø–µ—Ä–≤–æ–≥–æ –≤–∑–≥–ª—è–¥–∞?

---

## üéØ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û (–µ—Å–ª–∏ –µ—Å—Ç—å –≤—Ä–µ–º—è)

91. –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å.
92. –ö–∞–∫ —Ç—ã —É—á–∏–ª—Å—è –≤–æ–¥–∏—Ç—å?
93. –ë—ã–ª –ª–∏ —É —Ç–µ–±—è —É—á–∏—Ç–µ–ª—å/–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–º–µ–Ω–∏–ª —Ç–≤–æ—é –∂–∏–∑–Ω—å?
94. –ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ –∞–ª–∫–æ–≥–æ–ª—é?
95. –õ—é–±–∏—à—å –ª–∏ —Ç—ã —Å–º–æ—Ç—Ä–µ—Ç—å –∑–≤—ë–∑–¥—ã?
96. –í–µ—Ä–∏–ª –ª–∏ —Ç—ã –≤ –î–µ–¥–∞ –ú–æ—Ä–æ–∑–∞?
97. –ö–∞–∫ —Ç—ã –ø—Ä–∞–∑–¥–Ω–æ–≤–∞–ª –ù–æ–≤—ã–π –ì–æ–¥ –≤ –¥–µ—Ç—Å—Ç–≤–µ?
98. –ß—Ç–æ —Ç—ã –¥—É–º–∞–µ—à—å –æ –∫–æ—Å–º–æ—Å–µ –∏ –∏–Ω–æ–ø–ª–∞–Ω–µ—Ç—è–Ω–∞—Ö?
99. –ö–∞–∫ —Ç—ã –≤—ã–±–∏—Ä–∞–µ—à—å –ø–æ–¥–∞—Ä–∫–∏?
100. –ß—Ç–æ –±—ã —Ç—ã —Å–¥–µ–ª–∞–ª, –µ—Å–ª–∏ –±—ã –≤—ã–∏–≥—Ä–∞–ª –º–∏–ª–ª–∏–æ–Ω –¥–æ–ª–ª–∞—Ä–æ–≤?
101. –ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º —Å–µ—Ç—è–º?
102. –ß—Ç–æ —Ç—ã –¥—É–º–∞–µ—à—å –æ –º–æ–¥–µ?
103. –ö–∞–∫ —Ç—ã —É—á–∏—à—å—Å—è –Ω–æ–≤–æ–º—É –≤ —Å–≤–æ–∏ –≥–æ–¥—ã?
104. –ß—Ç–æ –¥–ª—è —Ç–µ–±—è ‚Äú–¥—Ä—É–∂–±–∞‚Äù?
105. –ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª, —á—Ç–æ–±—ã —è —Å–ø—Ä–æ—Å–∏–ª —É —Ç–µ–±—è, –Ω–æ –Ω–µ —Å–ø—Ä–æ—Å–∏–ª?

---

> üí° **–°–æ–≤–µ—Ç**: –ó–∞–ø–∏—à–∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –∞—É–¥–∏–æ (–¥–ª—è OpenVoice) + —Ä–∞—Å—à–∏—Ñ—Ä—É–π –≤ —Ç–µ–∫—Å—Ç (–¥–ª—è LLM).  
> –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Whisper.cpp –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏:  
> ```bash
> ./whisper.cpp/main -m models/ggml-small.bin -f father_answer_01.wav -l ru > father_texts/answer_01.txt
> ```

---

# ü§ñ –ß–ê–°–¢–¨ 5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ LLM (Llama 3) –∏ RAG

## 5.1. –£—Å—Ç–∞–Ω–æ–≤–∏ Ollama

```bash
curl -fsSL https://ollama.com/install.sh | sh
sudo systemctl enable ollama
sudo systemctl start ollama
```

## 5.2. –°–∫–∞—á–∞–π Llama 3 (—Ä—É—Å—Å–∫–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ –≤ 8B –≤–µ—Ä—Å–∏–∏):

```bash
ollama pull llama3:8b-instruct-q4_K_M
```

## 5.3. –£—Å—Ç–∞–Ω–æ–≤–∏ LlamaIndex –∏ ChromaDB

```bash
pip install llama-index llama-index-llms-ollama llama-index-readers-file llama-index-vector-stores-chroma chromadb
```

## 5.4. –°–æ–∑–¥–∞–π –∏–Ω–¥–µ–∫—Å –∑–Ω–∞–Ω–∏–π –æ—Ç—Ü–∞

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `build_index.py`:

```python
from llama_index.core import VectorStoreIndex, SimpleDirectoryReader
from llama_index.llms.ollama import Ollama
from llama_index.core import Settings

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤
documents = SimpleDirectoryReader("father_texts/").load_data()

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LLM
llm = Ollama(model="llama3", request_timeout=120.0)
Settings.llm = llm

# –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
index = VectorStoreIndex.from_documents(documents)

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
index.storage_context.persist(persist_dir="./father_index")
```

–ó–∞–ø—É—Å—Ç–∏:

```bash
python build_index.py
```

‚Üí –°–æ–∑–¥–∞—Å—Ç –ø–∞–ø–∫—É `father_index/` ‚Äî —ç—Ç–æ —Ç–≤–æ—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π.

---

# üé§ –ß–ê–°–¢–¨ 6: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Whisper.cpp (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä—É—Å—Å–∫–æ–π —Ä–µ—á–∏)

```bash
cd ~/father_ai
git clone https://github.com/ggerganov/whisper.cpp
cd whisper.cpp
make
```

–°–∫–∞—á–∞–π –º–æ–¥–µ–ª—å (small ‚Äî —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ/—Å–∫–æ—Ä–æ—Å—Ç—å):

```bash
bash ./models/download-ggml-model.sh small
```

–ü—Ä–æ–≤–µ—Ä—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ:

```bash
arecord -f S16_LE -r 16000 -c 1 -d 5 test.wav
./main -m models/ggml-small.bin -f test.wav -l ru
```

‚Üí –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º.

---

# üß© –ß–ê–°–¢–¨ 7: –°–±–æ—Ä–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

–°–æ–∑–¥–∞–π `assistant.py`:

```python
import subprocess
import torch
import os
from melo.api import TTS as MeloTTS
from openvoice.api import ToneColorConverter
from llama_index.core import load_index_from_storage, StorageContext
from llama_index.llms.ollama import Ollama
from llama_index.core import Settings

# === –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ===
WHISPER_PATH = os.path.expanduser("~/father_ai/whisper.cpp/main")
WHISPER_MODEL = os.path.expanduser("~/father_ai/whisper.cpp/models/ggml-small.bin")
FATHER_EMB = os.path.expanduser("~/father_ai/speaker_embeddings/father.npy")
INDEX_DIR = os.path.expanduser("~/father_ai/father_index")
OUTPUT_WAV = "response.wav"
RECORD_WAV = "query.wav"

# === –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π ===
device = "cuda:0" if torch.cuda.is_available() else "cpu"

# OpenVoice –¥–ª—è —Ç–æ–Ω–∞
converter = ToneColorConverter('checkpoints/converter/config.json', device=device)
converter.load_ckpt('checkpoints/converter/checkpoint.pth')
father_emb = torch.load(FATHER_EMB, map_location=device)

# MeloTTS –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ
melo_tts = MeloTTS(language='RU', device=device)

# LLM
llm = Ollama(model="llama3")
Settings.llm = llm

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–¥–µ–∫—Å–∞
storage_context = StorageContext.from_defaults(persist_dir=INDEX_DIR)
index = load_index_from_storage(storage_context)
chat_engine = index.as_chat_engine(chat_mode="condense_question", verbose=True)

# === –§—É–Ω–∫—Ü–∏–∏ ===
def record_audio(duration=5):
    print("üéôÔ∏è –ì–æ–≤–æ—Ä–∏—Ç–µ...")
    subprocess.run(["arecord", "-f", "S16_LE", "-r", "16000", "-c", "1", "-d", str(duration), RECORD_WAV])

def speech_to_text():
    result = subprocess.run([WHISPER_PATH, "-m", WHISPER_MODEL, "-f", RECORD_WAV, "-l", "ru"], capture_output=True, text=True)
    return result.stdout.strip()

def generate_response(text):
    response = chat_engine.chat(text)
    return response.response

def text_to_speech(text, output_path):
    tmp_path = "tmp_base.wav"
    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∞–∑–æ–≤–æ–≥–æ –≥–æ–ª–æ—Å–∞ —á–µ—Ä–µ–∑ MeloTTS
    melo_tts.tts_to_file(text, melo_tts.hps.data.spk2id['[RU]'], tmp_path)
    # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç–æ–Ω–∞ –æ—Ç—Ü–∞ —á–µ—Ä–µ–∑ OpenVoice
    converter.convert(
        audio_src_path=tmp_path,
        src_se=None,  # MeloTTS –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç se, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
        tgt_se=father_emb,
        output_path=output_path
    )

def play_audio(file_path):
    subprocess.run(["aplay", file_path])

# === –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª ===
if __name__ == "__main__":
    print("üéôÔ∏è –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞. –°–∫–∞–∂–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å...")
    while True:
        record_audio()
        text = speech_to_text()
        print(f"–í—ã —Å–∫–∞–∑–∞–ª–∏: {text}")
        
        if "–≤—ã—Ö–æ–¥" in text.lower() or "–ø–æ–∫–∞" in text.lower():
            goodbye = "–î–æ —Å–≤–∏–¥–∞–Ω–∏—è, —Å—ã–Ω. –ë–µ—Ä–µ–≥–∏ —Å–µ–±—è."
            print(f"–û—Ç–µ—Ü: {goodbye}")
            text_to_speech(goodbye, OUTPUT_WAV)
            play_audio(OUTPUT_WAV)
            break
            
        response = generate_response(text)
        print(f"–û—Ç–µ—Ü –æ—Ç–≤–µ—á–∞–µ—Ç: {response}")
        
        text_to_speech(response, OUTPUT_WAV)
        play_audio(OUTPUT_WAV)
```

---

# ‚ñ∂Ô∏è –ó–ê–ü–£–°–ö –°–ò–°–¢–ï–ú–´

```bash
cd ~/father_ai
python assistant.py
```

‚Üí –ì–æ–≤–æ—Ä–∏ –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω ‚Äî —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–≤–µ—Ç–∏—Ç –≥–æ–ª–æ—Å–æ–º –æ—Ç—Ü–∞.

---

# üîä –ß–ê–°–¢–¨ 8: Arduino Uno + –∫–æ–ª–æ–Ω–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –ü–æ–¥–∫–ª—é—á–∏ –∫–Ω–æ–ø–∫—É –∫ Arduino (PIN 2 ‚Üí GND —á–µ—Ä–µ–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä 10–∫–û–º, –≤—Ç–æ—Ä–æ–π –∫–æ–Ω—Ç–∞–∫—Ç ‚Üí 5V).

–ó–∞–≥—Ä—É–∑–∏ —Å–∫–µ—Ç—á:

```cpp
const int buttonPin = 2;
bool wasPressed = false;

void setup() {
  pinMode(buttonPin, INPUT_PULLUP);
  Serial.begin(9600);
}

void loop() {
  if (digitalRead(buttonPin) == LOW && !wasPressed) {
    delay(50);
    if (digitalRead(buttonPin) == LOW) {
      Serial.println("ACTIVATE");
      wasPressed = true;
    }
  }
  if (digitalRead(buttonPin) == HIGH) wasPressed = false;
  delay(50);
}
```

## –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π `assistant.py` ‚Äî –¥–æ–±–∞–≤—å –≤ –Ω–∞—á–∞–ª–æ:

```python
import serial
ser = serial.Serial('/dev/ttyACM0', 9600)  # –ø—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—Ç —á–µ—Ä–µ–∑ `ls /dev/ttyACM*`
```

–ó–∞–º–µ–Ω–∏ –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª:

```python
print("–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∞ Arduino, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å...")
while True:
    if ser.in_waiting > 0:
        line = ser.readline().decode('utf-8').strip()
        if line == "ACTIVATE":
            record_audio()
            text = speech_to_text()
            print(f"–í—ã —Å–∫–∞–∑–∞–ª–∏: {text}")
            if "–≤—ã—Ö–æ–¥" in text.lower():
                break
            response = generate_response(text)
            print(f"–û—Ç–µ—Ü: {response}")
            text_to_speech(response, OUTPUT_WAV)
            play_audio(OUTPUT_WAV)
```

---

# üìÅ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
~/father_ai/
‚îú‚îÄ‚îÄ venv/
‚îú‚îÄ‚îÄ datasets/father.wav
‚îú‚îÄ‚îÄ speaker_embeddings/father.npy
‚îú‚îÄ‚îÄ father_texts/             # ‚Üê —Å—é–¥–∞ –∫–ª–∞–¥–∏ .txt —Å –æ—Ç–≤–µ—Ç–∞–º–∏ –æ—Ç—Ü–∞
‚îú‚îÄ‚îÄ father_index/             # ‚Üê —Å–æ–∑–¥–∞–Ω–æ build_index.py
‚îú‚îÄ‚îÄ OpenVoice/
‚îú‚îÄ‚îÄ MeloTTS/
‚îú‚îÄ‚îÄ whisper.cpp/
‚îú‚îÄ‚îÄ assistant.py
‚îî‚îÄ‚îÄ build_index.py
```

---

# üîÑ –ö–ê–ö –û–¢–ï–¶ –ú–û–ñ–ï–¢ –û–ë–£–ß–ê–¢–¨ –°–ò–°–¢–ï–ú–£

1. **–î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ .txt —Ñ–∞–π–ª—ã** –≤ `father_texts/` ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç `python build_index.py`.
2. **–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –∞—É–¥–∏–æ** ‚Üí –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `father.npy` ‚Üí –∑–∞–º–µ–Ω—è–µ—Ç —Ñ–∞–π–ª.
3. **–ì–æ–≤–æ—Ä–∏—Ç —Å –ò–ò** ‚Üí –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ –ø–æ—Ö–æ–∂ –Ω–∞ –Ω–µ–≥–æ ‚Äî —Å–∞–º –ø–∏—à–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∫ .txt ‚Üí –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∏–Ω–¥–µ–∫—Å.
4. 

#!/bin/bash

# –¶–≤–µ—Ç–∞ –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo -e "${GREEN}üöÄ –ù–∞—á–∏–Ω–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É OpenVoice...${NC}"

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–æ–º–∞—à–Ω—é—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd ~/father_ai/OpenVoice 2>/dev/null || {
    echo -e "${RED}‚ùå –ü–∞–ø–∫–∞ ~/father_ai/OpenVoice –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –°–æ–∑–¥–∞—é...${NC}"
    mkdir -p ~/father_ai/OpenVoice
    cd ~/father_ai/OpenVoice
}

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ python3-venv
if ! dpkg -l | grep -q "python3-venv"; then
    echo -e "${YELLOW}üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é python3-venv —á–µ—Ä–µ–∑ apt...${NC}"
    sudo apt update && sudo apt install -y python3-venv
fi

# –°–æ–∑–¥–∞—ë–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
if [ ! -d "venv" ]; then
    echo -e "${YELLOW}üî® –°–æ–∑–¥–∞—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ...${NC}"
    python3 -m venv venv
fi

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
echo -e "${YELLOW}üîå –ê–∫—Ç–∏–≤–∏—Ä—É—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ...${NC}"
source venv/bin/activate

# –û–±–Ω–æ–≤–ª—è–µ–º pip
echo -e "${YELLOW}‚¨ÜÔ∏è –û–±–Ω–æ–≤–ª—è—é pip...${NC}"
pip install --upgrade pip

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ OpenVoice
echo -e "${YELLOW}üì• –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ requirements.txt...${NC}"
pip install -r requirements.txt

# –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫–∏ –¥–ª—è –º–æ–¥–µ–ª–µ–π
echo -e "${YELLOW}üìÅ –°–æ–∑–¥–∞—é –ø–∞–ø–∫–∏ –¥–ª—è –º–æ–¥–µ–ª–µ–π...${NC}"
mkdir -p checkpoints/base_speakers/ZH

# –°–∫–∞—á–∏–≤–∞–µ–º –ø—Ä–µ–¥–æ–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
echo -e "${YELLOW}‚¨áÔ∏è –°–∫–∞—á–∏–≤–∞—é –º–æ–¥–µ–ª–∏ OpenVoice...${NC}"
wget -q --show-progress -O checkpoints/base_speakers/ZH/checkpoint.pth https://myshell-public-repo-hosting.s3.amazonaws.com/openvoice/checkpoints/base_speakers/ZH/checkpoint.pth
wget -q --show-progress -O checkpoints/base_speakers/ZH/config.json https://myshell-public-repo-hosting.s3.amazonaws.com/openvoice/checkpoints/base_speakers/ZH/config.json

# –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫–∏ –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
mkdir -p speaker_embeddings

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É
echo -e "${YELLOW}üß™ –ü—Ä–æ–≤–µ—Ä—è—é —É—Å—Ç–∞–Ω–æ–≤–∫—É...${NC}"
python -c "import torch; print(f'‚úÖ PyTorch —Ä–∞–±–æ—Ç–∞–µ—Ç. CUDA –¥–æ—Å—Ç—É–ø–µ–Ω: {torch.cuda.is_available()}')" 2>/dev/null || {
    echo -e "${RED}‚ùå –û—à–∏–±–∫–∞: PyTorch –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ —Å–ª–æ–º–∞–Ω.${NC}"
    exit 1
}

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞ –æ—Ç—Ü–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å ‚Äî –∏–∑–≤–ª–µ–∫–∞–µ–º —ç–º–±–µ–¥–¥–∏–Ω–≥)
if [ -f "../datasets/father.wav" ]; then
    echo -e "${GREEN}üéôÔ∏è –ù–∞–π–¥–µ–Ω father.wav ‚Äî –∏–∑–≤–ª–µ–∫–∞—é –≥–æ–ª–æ—Å–æ–≤–æ–π —ç–º–±–µ–¥–¥–∏–Ω–≥...${NC}"
    python extract_speaker_embedding.py --source_path ../datasets/father.wav --output_path speaker_embeddings/father.npy && \
    echo -e "${GREEN}‚úÖ –≠–º–±–µ–¥–¥–∏–Ω–≥ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω: speaker_embeddings/father.npy${NC}"
else
    echo -e "${YELLOW}‚ö†Ô∏è –§–∞–π–ª ../datasets/father.wav –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü–æ–º–µ—Å—Ç–∏ —Ç—É–¥–∞ –∞—É–¥–∏–æ –æ—Ç—Ü–∞ (–º–∏–Ω–∏–º—É–º 3 –º–∏–Ω —á–∏—Å—Ç–æ–π —Ä–µ—á–∏) –∏ –∑–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞.${NC}"
fi

# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞
echo ""
echo -e "${GREEN}üéâ –£–°–¢–ê–ù–û–í–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê –£–°–ü–ï–®–ù–û!${NC}"
echo ""
echo -e "${YELLOW}üìå –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:${NC}"
echo "1. –ê–∫—Ç–∏–≤–∏—Ä—É–π –æ–∫—Ä—É–∂–µ–Ω–∏–µ: ${GREEN}source ~/father_ai/OpenVoice/venv/bin/activate${NC}"
echo "2. –ü–µ—Ä–µ–π–¥–∏ –≤ –ø–∞–ø–∫—É: ${GREEN}cd ~/father_ai/OpenVoice${NC}"
echo "3. –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏–ª father.wav ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏ –≤—Ä—É—á–Ω—É—é:"
echo "   ${GREEN}python extract_speaker_embedding.py --source_path ../datasets/father.wav --output_path speaker_embeddings/father.npy${NC}"
echo "4. –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OpenVoice."

# –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ)
deactivate

echo -e "${GREEN}‚úÖ –°–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à—ë–Ω. –£–¥–∞—á–∏ –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –¥–≤–æ–π–Ω–∏–∫–∞ –æ—Ç—Ü–∞! üñ§${NC}"

---



cd ~/father_ai/OpenVoice/checkpoints/base_speakers/ZH

wget --no-check-certificate \
  https://myshell-public-repo-hosting.s3.amazonaws.com/openvoice/checkpoints/base_speakers/ZH/checkpoint.pth
